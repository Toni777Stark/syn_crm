{% extends 'main.html' %}
{% load static %}

<!-- head block -->
{% block title %}Заказы{% endblock %}
{% block main-styles %}

<!-- manager styles -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="{% static 'manager/css/content.css' %}">
<link rel="stylesheet" href="{% static 'manager/css/pop-window.css' %}">
{% endblock %}


<!-- side bar -->
{% block main-sidebar %}
<li class="nav-item active">
    <a href="{% url 'home' %}" class="nav-link" aria-current="page">
        <i class="fa fa-calendar"></i><h5>Заказы</h5>
    </a>
</li>
<li class="nav-item">
    <a href="{% url 'refusals' %}" class="nav-link">
        <i class="fa fa-calendar"></i><h5>Отказы</h5>
    </a>
</li>
<li class="nav-item">
    <a href="refunds" class="nav-link">
        <i class="fa fa-calendar"></i><h5>Возвраты</h5>
    </a>
</li>
<li class="nav-item">
    <a href="#" class="nav-link">
        <i class="fa fa-user-circle"></i><h5>Клиенты</h5>
    </a>
</li>
<li class="nav-item">
    <a href="#" class="nav-link">
        <i class="fa fa-gauge-high"></i><h5>Дашбоард</h5>
    </a>
</li>
{% endblock %}

<!-- main content-block -->
{% block main-content %}
<form class="form-body" method="post">
{% csrf_token %}
    <div class="form-body-add-zakaz">
        <h2 class="name-block-input">Новый заказ</h2>
        <div class="form-body-row">

            <div class="form-body-block-input pidel-input">
                {{form.client}}
                <span class="pop-window-open-btn fa fa-plus" onclick="addclient_show()"></span>
            </div>
            
            <div class="form-body-block-input">
                {{form.deadline}}
            </div>

            <div class="form-body-block-input">
                {{form.priority}}
            </div>

        </div>
    </div>




    <div class="form-body-add-tovar">
        <h2 class="name-block-input" style="margin-top: 1em;">Товар</h2>
        <div class="form-body-row-block">
            <div class="form-body-row" id="form-body-1-row">

                        <h5>#1</h5>
                        <span data-name="add-btn" class="pop-window-open-btn fa fa-plus" onclick="addbirzh_show()"></span>
                        <div class="form-body-block-input birzha-name">
                            {{form.exchange1}}
                        </div>

                        <div class="form-body-block-input summa">
                            <input type="number" placeholder="Цена" maxlength="8"
                            oninput="onChange__form();">
                        </div>


                        <div class="form-body-block-input kolvo">
                            <input type="number" placeholder="Кол-во" maxlength="8"
                            oninput="onChange__form();">
                        </div>

                        <div class="form-body-block-input comment">
<!--                            <input type="text" placeholder="Коментарий" maxlength="250">-->
                            {{form.comment1}}
                        </div>

                        <div class="form-body-block-input type-email">
                            <select name="tovar-type-email">
                                <option value="none">Тип почты</option>
                                <option value="gmail">@gmail.com</option>
                                <option value="yandex">@yandex.ru</option>
                                <option value="mail">@mail.ru</option>
                            </select>
                        </div>

                        <div class="form-body-block-input type-number">
                            <select name="tovar-type-number">
                                <option value="none">Тип телефона</option>
                                <option value="+7">+7</option>
                                <option value="+380">+380</option>
                                <option value="+111">+111</option>
                                <option value="+123">+123</option>
                            </select>
                        </div>

                        <div class="form-body-block-input tovar-emulator">
                            <select name="tovar-emulator">
                                <option value="none">Эмулятор</option>
                                <option value="BlueStacks">BlueStacks</option>
                                <option value="NoxPlayer">NoxPlayer</option>
                                <option value="MedaiaPlayer">MedaiaPlayer</option>
                            </select>
                        </div>

                        <div class="form-body-block-input tovar-rezident">
                            <select name="tovar-rezident">
                                <option value="none" default>Резидент</option>
                                {% for geo in geos %}
                                <option value="tovar-geo" default>{{ geo.name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-body-block-input tovar-geo">
                            <select name="tovar-geo" multiple data-maximum-selection-length="2">
                                {% for geo in geos %}
                                <option value="tovar-geo" default>{{ geo.name }}</option>
                                {% endfor %}
                            </select>
                        </div>

            </div>
            <div class="form-body-row" id="form-body-2-row">
            

                    <h5>#2</h5>
                    <i class="form-body-copy-icon fa fa-clone" aria-hidden="true" onclick="form_body_clone('#form-body-2-row', '#form-body-1-row')"></i>
                    <div class="form-body-block-input birzha-name">
                        <select name="birzha-name">
                                <option value="none">Биржа</option>
                            {% for exchange in exchanges %}
                                <option value="{{ exchange.name }}">{{ exchange.name }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-body-block-input summa">
                        <input type="number" placeholder="Цена" maxlength="8"
                        oninput="onChange__form();">
                    </div>


                    <div class="form-body-block-input kolvo">
                        <input type="number" placeholder="Кол-во" maxlength="8"
                        oninput="onChange__form();">
                    </div>

                    <div class="form-body-block-input input-block comment">
                        <input type="text" placeholder="Коментарий" maxlength="250">
                    </div>

                    <div class="form-body-block-input type-email">
                        <select name="tovar-type-email">
                            <option value="none">Тип почты</option>
                            <option value="gmail">@gmail.com</option>
                            <option value="yandex">@yandex.ru</option>
                            <option value="mail">@mail.ru</option>
                        </select>
                    </div>

                    <div class="form-body-block-input type-number">
                        <select name="tovar-type-number">
                            <option value="none">Тип телефона</option>
                            <option value="+7">+7</option>
                            <option value="+380">+380</option>
                            <option value="+111">+111</option>
                            <option value="+123">+123</option>
                        </select>
                    </div>

                    <div class="form-body-block-input tovar-emulator">
                        <select name="tovar-emulator">
                            <option value="none">Эмулятор</option>
                            <option value="BlueStacks">BlueStacks</option>
                            <option value="NoxPlayer">NoxPlayer</option>
                            <option value="MedaiaPlayer">MedaiaPlayer</option>
                        </select>
                    </div>

                    <div class="form-body-block-input tovar-rezident">
                        <select name="tovar-rezident">
                            <option value="none" default>Резидент</option>
                            {% for geo in geos %}
                            <option value="tovar-geo" default>{{ geo.name }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-body-block-input tovar-geo">
                        <select name="tovar-geo" multiple data-maximum-selection-length="2">
                            {% for geo in geos %}
                            <option value="tovar-geo" default>{{ geo.name }}</option>
                            {% endfor %}
                        </select>
                    </div>

            </div>
            <div class="form-body-row" id="form-body-3-row">
            

                <h5>#3</h5>
                <i class="form-body-copy-icon fa fa-clone" aria-hidden="true" onclick="form_body_clone('#form-body-3-row', '#form-body-2-row')"></i>
                <div class="form-body-block-input birzha-name">
                    <select name="birzha-name">
                            <option value="none">Биржа</option>
                        {% for exchange in exchanges %}
                            <option value="{{ exchange.name }}">{{ exchange.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-body-block-input summa">
                    <input type="number" placeholder="Цена" maxlength="8"
                    oninput="onChange__form();">
                </div>


                <div class="form-body-block-input kolvo">
                    <input type="number" placeholder="Кол-во" maxlength="8"
                    oninput="onChange__form();">
                </div>

                <div class="form-body-block-input input-block comment">
                    <input type="text" placeholder="Коментарий" maxlength="250">
                </div>

                <div class="form-body-block-input type-email">
                    <select name="tovar-type-email">
                        <option value="none">Тип почты</option>
                        <option value="gmail">@gmail.com</option>
                        <option value="yandex">@yandex.ru</option>
                        <option value="mail">@mail.ru</option>
                    </select>
                </div>

                <div class="form-body-block-input type-number">
                    <select name="tovar-type-number">
                        <option value="none">Тип телефона</option>
                        <option value="+7">+7</option>
                        <option value="+380">+380</option>
                        <option value="+111">+111</option>
                        <option value="+123">+123</option>
                    </select>
                </div>

                <div class="form-body-block-input tovar-emulator">
                    <select name="tovar-emulator">
                        <option value="none">Эмулятор</option>
                        <option value="BlueStacks">BlueStacks</option>
                        <option value="NoxPlayer">NoxPlayer</option>
                        <option value="MedaiaPlayer">MedaiaPlayer</option>
                    </select>
                </div>

                <div class="form-body-block-input tovar-rezident">
                    <select name="tovar-rezident">
                        <option value="none" default>Резидент</option>
                        {% for geo in geos %}
                        <option value="tovar-geo" default>{{ geo.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-body-block-input tovar-geo">
                    <select name="tovar-geo" multiple data-maximum-selection-length="2">
                        {% for geo in geos %}
                        <option value="tovar-geo" default>{{ geo.name }}</option>
                        {% endfor %}
                    </select>
                </div>

            </div>
            <div class="form-body-row" id="form-body-4-row">

                <h5>#4</h5>
                <i class="form-body-copy-icon fa fa-clone" aria-hidden="true" onclick="form_body_clone('#form-body-4-row', '#form-body-3-row')"></i>
                <div class="form-body-block-input birzha-name">
                    <select name="birzha-name">
                            <option value="none">Биржа</option>
                        {% for exchange in exchanges %}
                            <option value="{{ exchange.name }}">{{ exchange.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-body-block-input summa">
                    <input type="number" placeholder="Цена" maxlength="8"
                    oninput="onChange__form();">
                </div>


                <div class="form-body-block-input kolvo">
                    <input type="number" placeholder="Кол-во" maxlength="8"
                    oninput="onChange__form();">
                </div>

                <div class="form-body-block-input input-block comment">
                    <input type="text" placeholder="Коментарий" maxlength="250">
                </div>

                <div class="form-body-block-input type-email">
                    <select name="tovar-type-email">
                        <option value="none">Тип почты</option>
                        <option value="gmail">@gmail.com</option>
                        <option value="yandex">@yandex.ru</option>
                        <option value="mail">@mail.ru</option>
                    </select>
                </div>

                <div class="form-body-block-input type-number">
                    <select name="tovar-type-number">
                        <option value="none">Тип телефона</option>
                        <option value="+7">+7</option>
                        <option value="+380">+380</option>
                        <option value="+111">+111</option>
                        <option value="+123">+123</option>
                    </select>
                </div>

                <div class="form-body-block-input tovar-emulator">
                    <select name="tovar-emulator">
                        <option value="none">Эмулятор</option>
                        <option value="BlueStacks">BlueStacks</option>
                        <option value="NoxPlayer">NoxPlayer</option>
                        <option value="MedaiaPlayer">MedaiaPlayer</option>
                    </select>
                </div>

                <div class="form-body-block-input tovar-rezident">
                    <select name="tovar-rezident">
                        <option value="none" default>Резидент</option>
                        {% for geo in geos %}
                        <option value="tovar-geo" default>{{ geo.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-body-block-input tovar-geo">
                    <select name="tovar-geo" multiple data-maximum-selection-length="2">
                        {% for geo in geos %}
                        <option value="tovar-geo" default>{{ geo.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="form-body-row" id="form-body-5-row">
            

                <h5>#5</h5>
                <i class="form-body-copy-icon fa fa-clone" aria-hidden="true" onclick="form_body_clone('#form-body-5-row', '#form-body-4-row')"></i>
                <div class="form-body-block-input birzha-name">
                    <select name="birzha-name">
                            <option value="none">Биржа</option>
                        {% for exchange in exchanges %}
                            <option value="{{ exchange.name }}">{{ exchange.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-body-block-input summa">
                    <input type="number" placeholder="Цена" maxlength="8"
                    oninput="onChange__form();">
                </div>


                <div class="form-body-block-input kolvo">
                    <input type="number" placeholder="Кол-во" maxlength="8"
                    oninput="onChange__form();">
                </div>

                <div class="form-body-block-input input-block comment">
                    <input type="text" placeholder="Коментарий" maxlength="250">
                </div>

                <div class="form-body-block-input type-email">
                    <select name="tovar-type-email">
                        <option value="none">Тип почты</option>
                        <option value="gmail">@gmail.com</option>
                        <option value="yandex">@yandex.ru</option>
                        <option value="mail">@mail.ru</option>
                    </select>
                </div>

                <div class="form-body-block-input type-number">
                    <select name="tovar-type-number">
                        <option value="none">Тип телефона</option>
                        <option value="+7">+7</option>
                        <option value="+380">+380</option>
                        <option value="+111">+111</option>
                        <option value="+123">+123</option>
                    </select>
                </div>

                <div class="form-body-block-input tovar-emulator">
                    <select name="tovar-emulator">
                        <option value="none">Эмулятор</option>
                        <option value="BlueStacks">BlueStacks</option>
                        <option value="NoxPlayer">NoxPlayer</option>
                        <option value="MedaiaPlayer">MedaiaPlayer</option>
                    </select>
                </div>

                <div class="form-body-block-input tovar-rezident">
                    <select name="tovar-rezident">
                        <option value="none" default>Резидент</option>
                        {% for geo in geos %}
                        <option value="tovar-geo" default>{{ geo.name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-body-block-input tovar-geo">
                    <select name="tovar-geo" multiple data-maximum-selection-length="2">
                        {% for geo in geos %}
                        <option value="tovar-geo" default>{{ geo.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>


        </div>
    </div>

    <div class="body-form-block-btn mt-4">

        <div class="body-form-block-summa mb-2">
            <h4>Общая сумма: <span id="form_summa_vivod">0</span>$</h4>
            <input type="hidden" id="summ" name="summ" value="0">
        </div>
        
        <div class="df">
            <button class="btn btn-primary btn-add-zakaz">Добавить заказ</button>
<!--            <input type="checkbox" class="btn-check" id="btn-check-2" checked autocomplete="off">-->
<!--            <label class="form-body-label-btn noselect" for="btn-check-2" id="form-body-label-btn">Связка</label>-->
            {{ form.bundle }}
            <label for="{{ form.bundle.id_for_label }}" class="form-body-label-btn noselect" id="form-body-label-btn">
                {{ form.bundle.label }}</label>
        </div>

        {% if error %}
        <h6 class="btn-add-zakaz-lower error">{{ error }}</h6>
        {% else %}
        <h6 class="btn-add-zakaz-lower">Форма была добавлена!</h6>
        {% endif %}
    </div>


    <hr>
    <div class="form-list-zakazi-block">

        <h3 class="form-list-zakazi-name mb-3">Мои заказы</h3>

        <div class="form-list-zakazi">
            <div class="form-table-name mb-2">
                <h5>Номер заказа<i class="fa fa-angle-down" aria-hidden="true"></i></h5>
                <h5>Дата<i class="fa fa-angle-down" aria-hidden="true"></i></h5>
                <h5>Срок<i class="fa fa-angle-down" aria-hidden="true"></i></h5>
                <h5>Клиент<i class="fa fa-angle-down" aria-hidden="true"></i></h5>
                <h5>Сумма<i class="fa fa-angle-down" aria-hidden="true"></i></h5>
                <h5>Статус<i class="fa fa-angle-down" aria-hidden="true"></i></h5>
            </div>


            <!-- Вот сюда надо данные из бд -->
            <div class="form-table">

                <div>
                    <h5>1541</h5>

                    <h5>1541</h5>

                    <h5>1541</h5>

                    <h5>1541</h5>

                    <h5>1541</h5>

                    <h5>1541</h5>
                </div>

                <div>
                    <h5>01.05.2023 15:10:51</h5>

                    <h5>01.05.2023 15:10:51</h5>

                    <h5>01.05.2023 15:10:51</h5>

                    <h5>01.05.2023 15:10:51</h5>

                    <h5>01.05.2023 15:10:51</h5>
                    
                    <h5>01.05.2023 15:10:51</h5>
                </div>

                <div>
                    <h5>02.05.2023 15:10:51</h5>

                    <h5>02.05.2023 15:10:51</h5>

                    <h5>02.05.2023 15:10:51</h5>

                    <h5>02.05.2023 15:10:51</h5>

                    <h5>02.05.2023 15:10:51</h5>
                    
                    <h5>02.05.2023 15:10:51</h5>
                </div>
                
                <div>
                    {% for client in page_obj %}
                    <h5>{{ client.tg }}</h5>
                    {% endfor %}
                </div>
                
                <div>
                    <h5>500$</h5>

                    <h5>500$</h5>

                    <h5>500$</h5>

                    <h5>500$</h5>

                    <h5>500$</h5>

                    <h5>500$</h5>
                </div>
                
                <div>
                    <h5>Отгружен</h5>

                    <h5>Отгружен</h5>

                    <h5>Отгружен</h5>

                    <h5>Отгружен</h5>

                    <h5>Отгружен</h5>

                    <h5>Отгружен</h5>
                </div>
            </div>

        </div>



        <div class="form-list-btn mt-5">
			{% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">
				<i class="fa fa-angle-left" aria-hidden="true"></i>
			</a>
			{% endif %}

			
            <h5 class="form-list-page-number">
                Страница
                <span id="table-page-number">{{ page_obj.number }}</span>
                Из
                <span id="table-full-page">{{ page_max_page }}</span>
            </h5>

            
			{% if page_obj.has_next %}
			 <a href="?page={{ page_obj.next_page_number }}">
				<i class="fa fa-angle-right"  aria-hidden="true"></i>
			</a>
			{% endif %}
        </div>
    </div>
</form>


<footer class="mt-5 mb-3">
    <h5>@ 2023 Synergy Company</h5>
</footer>
{% endblock %}

<!-- main pop-window-block -->
{% block main-pop-window %}
<div id="pop-add-client" class="pop-window">
    <div class="pop-container">
        <i href="javascript:void(0)" class="fa fa-times pop-window-close-btn" onclick="addclient_close()"></i>

        <div class="block-new-client">
            <h3>Новый клиент</h2>
            <form action="#" class="form-new-client">
                <input type="text" placeholder="Ник клиента">
                <input type="text" placeholder="Телеграм клиента">
                <button class="btn btn-primary">Добавить клиента</button>
            </form>
        </div>
    </div>
</div>
<div id="pop-add-birzh" class="pop-window">
    <div class="pop-container">
        <i href="javascript:void(0)" class="fa fa-times pop-window-close-btn" onclick="addbirzh_close()"></i>

        <div class="block-new-birzha">
            <h3>Новая биржа</h2>
            <form action="#" class="form-new-birzha">
                <input type="text" placeholder="Название биржы">
                <button class="btn btn-primary">Добавить биржу</button>
            </form>
        </div>
    </div>
</div> 
{% endblock %}


<!-- main scripts-block -->
{% block main-scripts %}
<script src="{% static 'manager/js/content.js' %}" type="text/javascript"></script>

<script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/i18n/ru.js" defer></script>
{% endblock %}